<div class="row h-100 m-0 animate__animated animate__fadeIn animate__faster">

    <div class="col-12 p-0">

      <div class="row m-0 h-100 align-items-center">

          <div class="col-4 px-0">

            <div class="row mx-0">

              <div class="col-3 px-0"> <b>Total empresas</b>: </div>

              <div class="pl-4 col-9"><span class="number-label">{{ companies.length }}</span></div>

            </div>
              
          </div>
         
        <div class="col-3 offset-3">

            <input  type="text" class="finder" placeholder="Buscar empresa" (keyup)="filterTableElements($event)">

            <img src="assets/icons/LUPA.png" alt="LUPA" class="magnifying-glass small-icon">
                
        </div>
        
        <div class="col-2 pl-2 pr-0">
            
            <button class="btn btn-block btn-info" routerLink="nuevo">Nueva empresa</button>

        </div>

      </div>
  
    </div>

   <!-- TABLA -->
   <div class="col-12 p-0 table-col mt-2">
        
    <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-responsive-sm">
        <thead>
            <tr> 
                <th></th>
                <th>Empresa</th>
                <th>Ubicación</th>
                <th class="text-center">Nº Proyectos</th>
                <th class="text-center">Nº Usuarios</th>
                <th class="text-center">Acciones</th>
            </tr>
        </thead>
        <tbody>

            <tr *ngFor="let company of companies">
               
                <td class="text-left">
                    
                    <img (click)="toggleFullscreen($event)" class="company-image pointer" [attr.title]="company.name" [src]="company.image_path">
                    
                </td>

                <td class="text-left">
                    
                    {{ company.name }}

                </td>

                <td>
                    {{ company.municipality.name }}, {{ company.municipality.province.name }}
                </td>

                <td class="text-center"> 
                    <b>{{ company.projects_count }}</b>
                </td>

                <td class="text-center"> 
                    <b>{{ company.users_count }}</b>
                </td>
                
                <td class="text-center"> 

                    <a [routerLink]="[company.id, 'editar']" routerLinkActive="router-link-active"  class="btn btn-transparent d-inline">
                        <img  class="medium-icon" src="assets/icons/EDITAR.svg" alt="editar">
                    </a>

                    <a [routerLink]="[company.id]" routerLinkActive="router-link-active"  class="btn btn-transparent d-inline">
                        <img  class="medium-icon" src="assets/icons/visualizar.svg" alt="detalles">
                    </a>
                    
                    <!-- <button (click)="deleteCompany(company.id)" class="btn btn-transparent d-inline">
                        <img  class="medium-icon" src="assets/icons/SVG/PAPEPERA_R.svg" alt="borrar">
                    </button> -->

                </td>

            </tr>
        </tbody>
    </table>        

  </div>

     <!-- SPINNER -->
     <div *ngIf="showSpinner" class="spinner animate__animated animate__fadeIn animate__faster">
        <mat-spinner></mat-spinner>
    </div>
  
</div>
